{"ast":null,"code":"import API from '../../API';\n// import { fetchItemsAction } from \"../items/actions\";\nimport { addCartAction, decreaseCartAction, increaseCartAction, fetchCartAction } from './actions';\nconst api = new API();\nconst CARTS_KEY = 'CARTS_KEY';\nexport const fetchFromLocalStorage = () => {\n  return async dispatch => {\n    let cartsJSON = localStorage.getItem('CARTS_KEY');\n    let carts = {};\n    if (cartsJSON) {\n      carts = JSON.parse(cartsJSON);\n    }\n    const subtotal = calculateSubtotal(carts);\n    dispatch(fetchCartAction(carts, subtotal));\n  };\n};\nexport const addCart = item => {\n  return async (dispatch, getState) => {\n    let prevCarts = getState().carts.list;\n    prevCarts[item.id] = {\n      item: item,\n      selected_count: 1\n    };\n    const subtotal = calculateSubtotal(prevCarts);\n    setToLocalStorage(prevCarts);\n    dispatch(addCartAction(prevCarts, subtotal));\n  };\n};\nexport const increaseCart = item => {\n  return async (dispatch, getState) => {\n    let prevCarts = getState().carts.list;\n    let nextSeletedCount = prevCarts[item.id].selected_count + 1;\n    prevCarts[item.id] = {\n      item: item,\n      selected_count: nextSeletedCount\n    };\n    const subtotal = calculateSubtotal(prevCarts);\n    setToLocalStorage(prevCarts);\n    dispatch(increaseCartAction(prevCarts, subtotal));\n  };\n};\nexport const decreaseCart = item => {\n  return async (dispatch, getState) => {\n    let prevCarts = getState().carts.list;\n    let nextSeletedCount = prevCarts[item.id].selected_count - 1;\n    if (nextSeletedCount > 0) {\n      prevCarts[item.id] = {\n        item: item,\n        selected_count: nextSeletedCount\n      };\n    } else {\n      delete prevCarts[item.id];\n    }\n    const subtotal = calculateSubtotal(prevCarts);\n    setToLocalStorage(prevCarts);\n    dispatch(decreaseCartAction(prevCarts, subtotal));\n  };\n};\nconst setToLocalStorage = carts => {\n  localStorage.setItem(CARTS_KEY, JSON.stringify(carts));\n};\nconst calculateSubtotal = carts => {\n  let subtotal = 0;\n  console.log(carts);\n  for (let key in carts) {\n    subtotal += Number(carts[key].item.price) * carts[key].selected_count;\n  }\n  console.log(subtotal);\n  return subtotal;\n  subtotal = '';\n};","map":{"version":3,"names":["API","addCartAction","decreaseCartAction","increaseCartAction","fetchCartAction","api","CARTS_KEY","fetchFromLocalStorage","dispatch","cartsJSON","localStorage","getItem","carts","JSON","parse","subtotal","calculateSubtotal","addCart","item","getState","prevCarts","list","id","selected_count","setToLocalStorage","increaseCart","nextSeletedCount","decreaseCart","setItem","stringify","console","log","key","Number","price"],"sources":["/Users/perryharris/Desktop/Projects/project-/techis-wd-forum-django-react/frontend/src/reducks/cart/operations.js"],"sourcesContent":["import API from '../../API';\n// import { fetchItemsAction } from \"../items/actions\";\nimport { addCartAction, decreaseCartAction, increaseCartAction, fetchCartAction } from './actions';\n\nconst api = new API();\nconst CARTS_KEY = 'CARTS_KEY';\n\nexport const fetchFromLocalStorage = () => {\n    return async dispatch => {\n        let cartsJSON = localStorage.getItem('CARTS_KEY');\n        let carts = {};\n        if (cartsJSON) {\n            carts = JSON.parse(cartsJSON);\n        }\n        const subtotal = calculateSubtotal(carts);\n        dispatch(fetchCartAction(carts, subtotal));\n    };\n};\nexport const addCart = item => {\n    return async (dispatch, getState) => {\n        let prevCarts = getState().carts.list;\n        prevCarts[item.id] = { item: item, selected_count: 1 };\n        const subtotal = calculateSubtotal(prevCarts);\n        setToLocalStorage(prevCarts);\n        dispatch(addCartAction(prevCarts, subtotal));\n    };\n};\n\nexport const increaseCart = item => {\n    return async (dispatch, getState) => {\n        let prevCarts = getState().carts.list;\n        let nextSeletedCount = prevCarts[item.id].selected_count + 1;\n        prevCarts[item.id] = { item: item, selected_count: nextSeletedCount };\n        const subtotal = calculateSubtotal(prevCarts);\n        setToLocalStorage(prevCarts);\n        dispatch(increaseCartAction(prevCarts, subtotal));\n    };\n};\n\nexport const decreaseCart = item => {\n    return async (dispatch, getState) => {\n        let prevCarts = getState().carts.list;\n        let nextSeletedCount = prevCarts[item.id].selected_count - 1;\n        if (nextSeletedCount > 0) {\n            prevCarts[item.id] = { item: item, selected_count: nextSeletedCount };\n        } else {\n            delete prevCarts[item.id];\n        }\n        const subtotal = calculateSubtotal(prevCarts);\n        setToLocalStorage(prevCarts);\n        dispatch(decreaseCartAction(prevCarts, subtotal));\n    };\n};\nconst setToLocalStorage = carts => {\n    localStorage.setItem(CARTS_KEY, JSON.stringify(carts));\n};\n\nconst calculateSubtotal = carts => {\n    let subtotal = 0;\n    console.log(carts);\n    for (let key in carts) {\n        subtotal += Number(carts[key].item.price) * carts[key].selected_count;\n    }\n    console.log(subtotal);\n    return subtotal;\n    subtotal = '';\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}